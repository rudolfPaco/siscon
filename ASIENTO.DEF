        FILE DEFINITION LISTING FOR FILE #82
*************************************************** 
        FILE ROOT NAME     = CONTRA
        USER DISPLAY NAME  = CONTRA
        DATAFLEX FILE NAME = CONTRA
*************************************************** 
        RECORD LENGTH = 128  (USED = 120)
        MAX NUMBER OF RECORDS = 100000  (USED = 16)
        DELETED SPACE IS RE-USED
        MULTI-USER RE-READ ACTIVE
*************************************************** 
FIELD   FIELD   FIELD   FIELD  DEC  MAIN  RELATES--TO
NMBR    OFFSET  LEN     TYPE   PTS  INDEX FILE  FIELD
-----   ------  -----   -----  ---  ----- ----  -----
   1       1       1   NUMERIC   0    1    0     0     TIPCON	o TIPo CONprobante:
									RECUPERA DE:
									TABVAR.TIPO: 2  TABVAR.NUMERO:	 1=INGRESO
													 2=EGRESO
													 3=DIARIO	
									el campo OBSERV para describir el comprobante
									el campo CORREL  para numerarlo, e incrementarlo cuando
									concluye y graba.
   2       2       3   NUMERIC   0    1    0     0     NUMCON   o NUMERO CONprobante, generado al digitar el TIPCON, en caso 
									de existir este numero en la base datos recuperarlo para 
									aplicar rutinas de modificacion o eliminacion.
									Estos dos campos son INMODIFICABLES para estas opciones.
   3       5       1   NUMERIC   0    1    0     0     CORREL	o CORRELATIVO, es el numero de item de apropiacion del comprobante,
									debe generarse a medida que se van construyendo los montos
									al DEBE o HABER de la apropiacion
   4       6       3   DATE           2    0     0     FECHA		Es la fecha del sistema, campo INMODIFICABLE para cualquier
									opcion de proceso (A/E/M)
   5       9       1   NUMERIC   0    0    0     0     GRUPO		Campo del mismo nombre que se recupera del Plan de Cuentas
   6      10       1   NUMERIC   0    0    0     0     SUBGRU		id.ant.
   7      11       1   NUMERIC   0    0    0     0     MAYOR		id.ant.
   8      12       1   NUMERIC   0    0    0     0     CUENTA o ANALIT	id.ant.
   9      13       1   NUMERIC   0    0    0     0     SUBCTA o SUBANA  id.ant.
  10      14       1   NUMERIC   0    0    0     0     APROPI		Campo no-digitable, valor 1 cuando el monto es DEBE
											     	  2 cuando monto es HABER
  11      15       5   NUMERIC   2    0    0     0     MONTO1		Es el monto en bolivianos
  12      20       5   NUMERIC   2    0    0     0     MONTO2		Es el monto en dolares
  13      25       2   NUMERIC   2    0    0     0     TIPCAM		Es el tipo de cambio que se recupera de USUARI.TIPCAM y es 
									inmodificable.
  14      27       1   NUMERIC   0    0    0     0     INDICA		????indicador de asiento que identifica si el asiento es 
									procesado para el control del presupuesto 
  15      28      25   ASCII          0    0     0     NOMBRE		Es el campo donde se registra el nombre del interesado
									obligatorio para el comprobante de egreso/ingreso y optativo
									para el de diario.
  16      53      50   ASCII          0    0     0     GLOSA		Es el concepto corto del asiento
									el concepto largo del asiento se graba en otro archivo (???)
  17     103       5   NUMERIC   0    0    0     0     CHEQUE		Es el numero de cheque, recibo o documento que ampara
									este asiento
  18     108       2   NUMERIC   0    0    0     0     NUMCUE		Campo del numero de cuenta presupuestaria ???
  19     110       4   NUMERIC   0    3   80     2     CUETOT		Campo del mismo nombre que se recupera del Plan de Cuentas
									en el programa de asientos este es el campo que debe facilitar
									la consulta del plan de cuentas mediante una ventana emergente
									que muestra SOLAMENTE los registros cuya actividad es igual a 2
									y debe ser capaz de buscar en forma alfabetica por la denominacion
									de la cuenta o mostrando la totalidad del Plan de Cuentas, para
									poder recuperarlo al campo respectivo en la pantalla.
  20     114       1   NUMERIC   0    0    0     0     REDUCE		??? (campo bandera para indicar que ha sido transferido a un 
									archivo historico.
  21     115       1   NUMERIC   0    0    0     0     TIPCOM		???tipo de comprobante de la contabilidad fiscal o fiscal
  22     116       1   NUMERIC   0    0    0     0     INTERN		???Indicador que identifica si el asiento de una contabilidad
									interna o fiscal
  23     117       3   NUMERIC   0    0    0     0     NUMINT		Numero de documento origen de otros sistema que se graba 
									al integrar los sistemas
  24     120       1   NUMERIC   0    0    0     0     EMPRES		Es el numero de empresa que se ha recuperado del archivo TABVAR
									tabla 10 y numero 1 a 99

INDEX 1:  FIELD SEGMENTS:  <1>   <2>   <3>  	//indice para consulta por tipo de asiento
INDEX 2:  FIELD SEGMENTS:  <4>   <1>   <2>   <3>//indice para consulta de libro diario (x fecha)
							 y para la mayorizacion
INDEX 3:  FIELD SEGMENTS:  <19>   <4>   <0>  	//indice para el mayor analitico


/P
 _________1______ (2_.)					   SISTEMA CONTABILIDAD

 Tipo Comprobante: 3_.  COMPROBANTE de ___4___ No.: __5__.
		       -----------------------------------  Fecha: __/_6/____
 Doc.Ref. : ___7_____.
 Concepto : _______8______________________________________    T/C: 9_.__ Bs/Us
------------------------------------------------------------------------------
!No.! CODIGO !	       C U E N T A	  !    DEBE   !   HABER   ! MONTO Us.!
------------------------------------------------------------------------------
 10_. __11__. ___________12_______________ ____13__.__ ___14___.__ ___15__.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
 _.  ___Z___. ____________________________ ________.__ ________.__ _______.__
------------------------------------------------------------------------------
 _.  _______._	    Total Comprobante  Bs. ________.__ ________.__ _______.__
==============================================================================
 ____________________________________________________________________ _ _____.
/Q
 ________1____________					  SISTEMA CONTABILIDAD
 Tipo Documento: (2_.)	DOCUMENTO de ____3___ No. __4__.
			******************************** +--------------------+
							 !Monto Bs. ___5___.__!
							 +--------------------+
  _____6_____	  : ____________7__________________________________

  La suma de	  :
  _______________________________8____________________________________________
								    ____9_____
      Por Concepto: ____________________10__________________
		    _______________________11______________________
		    __________________________12___________________
		    _____________________________13________________
		    ________________________________14_____________

				    Fecha, 15_. de ____16_____ de _17_.
      Cta.Cte.	  : _____18________
      Banco	  : ________19_____
      ChequeNumero: _____20__.			      ...................
							     Firma
				    Conforme : _______21__________________
  _____________________________________22_________________________________ 23_
  DE PANTALLA Q -->  PANTALLA P
	MOVE Q.2 TO P.3
	MOVE Q.3 TO P.4
	MOVE Q.4 TO P.5
//	MOVE Q.5 TO P.71
	MOVE Q.20 TO P.7	//NRO.CHEQUE
	MOVE Q.10 TO P.8	//GLOSA


 PANTALLA_REGISTRO:
	MOVE P.3 TO CONTRA.TIPCON
	MOVE P.5 TO CONTRA.NUMCON
	MOVE P.6 TO CONTRA.FECHA
	MOVE P.7 TO CONTRA.CHEQUE
	MOVE P.8 TO CONTRA.GLOSA
	MOVE P.9 TO CONTRA.TIPCAM
	MOVE P.10& TO CONTRA.CORREL
	MOVE P.11& TO CONTRA.CUETOT
	IF P.13& EQ 0 BEGIN
		MOVE 2 TO CONTRA.APROPI
		MOVE 2 TO APROPI
		MOVE P.14& TO CONTRA.MONTO1
		MOVE P.15& TO CONTRA.MONTO2
		GOSUB ACTMAE_HABER
		END
	ELSE BEGIN
		MOVE 1 TO APROPI
		MOVE 1 TO CONTRA.APROPI
		MOVE P.13& TO CONTRA.MONTO1
		MOVE P.15& TO CONTRA.MONTO2
		GOSUB ACTMAE_DEBE
		END
	MOVE P.3 TO CONTRA.TIPCOM
	MOVE P.2 TO CONTRA.EMPRES
	MOVE CONMAE.GRUPO  TO CONTRA.GRUPO
	MOVE CONMAE.GRUPO TO GRUPO
	MOVE CONMAE.SUBGRU TO CONTRA.SUBGRU
	MOVE CONMAE.SUBGRU TO SUBGRU
	MOVE CONMAE.MAYOR  TO CONTRA.MAYOR
	MOVE CONMAE.MAYOR TO MAYOR
	MOVE CONMAE.CUENTA TO CONTRA.CUENTA
	MOVE CONMAE.CUENTA TO CUENTA
	MOVE CONMAE.SUBCTA TO CONTRA.SUBCTA
	MOVE CONMAE.NIVEL TO CONTRA.INDICA
	MOVE CONMAE.NIVEL TO NIVEL
	SAVERECORD CONMAE
	RETURN

***********************************************
MAYORIZA_SALDO:
	IF NIVEL EQ 5 BEGIN
		CLEAR CONMAE
		MOVE GRUPO TO CONMAE.GRUPO
		MOVE SUBGRU TO CONMAE.SUBGRU
		MOVE MAYOR TO CONMAE.MAYOR
		MOVE CUENTA TO CONMAE.CUENTA
		MOVE 0 TO CONMAE.SUBCTA
		GOSUB UBICA_MAESTR2
		IF APROPI EQ 1 GOSUB ACTMAE_DEBE
		IF APROPI EQ 2 GOSUB ACTMAE_HABER
		SAVERECORD CONMAE
		MOVE 4 TO NIVEL
		END
	IF NIVEL EQ 4 BEGIN
		CLEAR CONMAE
		MOVE GRUPO TO CONMAE.GRUPO
		MOVE SUBGRU TO CONMAE.SUBGRU
		MOVE MAYOR TO CONMAE.MAYOR
		MOVE 0 TO CONMAE.CUENTA
		MOVE 0 TO CONMAE.SUBCTA
		GOSUB UBICA_MAESTR2
		IF APROPI EQ 1 GOSUB ACTMAE_DEBE
		IF APROPI EQ 2 GOSUB ACTMAE_HABER
		SAVERECORD CONMAE
		MOVE 3 TO NIVEL
		END
	IF NIVEL EQ 3 BEGIN
		CLEAR CONMAE
		MOVE GRUPO TO CONMAE.GRUPO
		MOVE SUBGRU TO CONMAE.SUBGRU
		MOVE 0 TO CONMAE.MAYOR
		MOVE 0 TO CONMAE.CUENTA
		MOVE 0 TO CONMAE.SUBCTA
		GOSUB UBICA_MAESTR2
		IF APROPI EQ 1 GOSUB ACTMAE_DEBE
		IF APROPI EQ 2 GOSUB ACTMAE_HABER
		SAVERECORD CONMAE
		MOVE 2 TO NIVEL
		END
	IF NIVEL EQ 2 BEGIN
		CLEAR CONMAE
		MOVE GRUPO TO CONMAE.GRUPO
		MOVE 0 TO CONMAE.SUBGRU
		MOVE 0 TO CONMAE.MAYOR
		MOVE 0 TO CONMAE.CUENTA
		MOVE 0 TO CONMAE.SUBCTA
		GOSUB UBICA_MAESTR2
		IF APROPI EQ 1 GOSUB ACTMAE_DEBE
		IF APROPI EQ 2 GOSUB ACTMAE_HABER
		SAVERECORD CONMAE
		END
	DISPLAY "MAYORIZANDO..." TO P.75
	RETURN

UBICA_MAESTR2:
	FIND EQ CONMAE BY INDEX.1
	[FINDERR] BEGIN
		DISPLAY "ERROR IRREPARABLE MAYORIZACION ITEM No." TO P.75
		DISPLAY P.10& TO P.77
		ACCEPT P.76
		GOTO K01
		END
	RETURN
ÿ